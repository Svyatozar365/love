// –ñ–¥–µ–º, –ø–æ–∫–∞ –≤—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è
document.addEventListener('DOMContentLoaded', function() {

    // –ù–∞—Ö–æ–¥–∏–º —ç–ª–µ–º–µ–Ω—Ç—ã
    const button = document.getElementById('specialButton');
    const hiddenMessageDiv = document.getElementById('hiddenMessage');
    const confettiCanvas = document.getElementById('confetti-canvas');

    // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ (–µ—Å–ª–∏ canvas –Ω–∞–π–¥–µ–Ω)
    const fireConfetti = confettiCanvas ? confetti.create(confettiCanvas, {
        resize: true, // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–º–µ–Ω—è—Ç—å —Ä–∞–∑–º–µ—Ä –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –æ–∫–Ω–∞
        useWorker: true // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Web Worker –¥–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ)
    }) : null;

    // –§–ª–∞–≥, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è, –µ—Å–ª–∏ –∫–ª–∏–∫ –±—ã—Å—Ç—Ä—ã–π
    let isRevealing = false;

    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è "–∫–ª–∏–∫" –Ω–∞ –∫–Ω–æ–ø–∫—É
    button.addEventListener('click', function() {
        // –ï—Å–ª–∏ —É–∂–µ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –∏–ª–∏ –∫–Ω–æ–ø–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞, –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º
        if (isRevealing || button.disabled) {
            return;
        }
        isRevealing = true;

        // 1. –ó–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ñ–µ—Ç—Ç–∏!
        if (fireConfetti) {
            fireConfetti({
                particleCount: 150, // –ë–æ–ª—å—à–µ —á–∞—Å—Ç–∏—Ü!
                spread: 100,       // –®–∏—Ä–µ —Ä–∞–∑–±—Ä–æ—Å
                origin: { y: 0.6 }, // –°—Ç–∞—Ä—Ç —á—É—Ç—å –Ω–∏–∂–µ —Ü–µ–Ω—Ç—Ä–∞
                colors: ['#ff4081', '#e91e63', '#f8bbd0', '#ffffff', '#fce4ec'] // –†–æ–∑–æ–≤—ã–µ –∏ –±–µ–ª—ã–µ —Ü–≤–µ—Ç–∞
            });
        }

        // 2. –ü–ª–∞–≤–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–∫—Ä—ã—Ç–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        hiddenMessageDiv.classList.add('visible');

        // 3. –ú–µ–Ω—è–µ–º —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –∏ –æ—Ç–∫–ª—é—á–∞–µ–º –µ–µ
        // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —Ç–µ–∫—Å—Ç–∞/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ–º –¥–ª—è –ª—É—á—à–µ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞
        setTimeout(() => {
            button.innerHTML = '<span class="button-icon">ü•∞</span> –°—é—Ä–ø—Ä–∏–∑ —É–¥–∞–ª—Å—è!'; // –ú–µ–Ω—è–µ–º —Ç–µ–∫—Å—Ç –∏ –∏–∫–æ–Ω–∫—É
            button.disabled = true;
            // –ú–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å —Å—Ç–∏–ª–∏ hover/active –ø–æ—Å–ª–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è, –Ω–æ :disabled —É–∂–µ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
        }, 300); // –ó–∞–¥–µ—Ä–∂–∫–∞ –≤ 300 –º—Å

        // 4. –ü–ª–∞–≤–Ω–æ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫ –ø–æ—è–≤–∏–≤—à–µ–º—É—Å—è —Å–æ–æ–±—â–µ–Ω–∏—é
        // –î–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–æ–∫–∞–∑–∞ –Ω–µ–º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –ø–µ—Ä–µ–¥ –ø—Ä–æ–∫—Ä—É—Ç–∫–æ–π
        setTimeout(() => {
            hiddenMessageDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
            isRevealing = false; // –ó–∞–≤–µ—Ä—à–∏–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å
        }, 500); // –ó–∞–¥–µ—Ä–∂–∫–∞ —á—É—Ç—å –±–æ–ª—å—à–µ, —á–µ–º —É –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏

    });

    // –ù–µ–±–æ–ª—å—à–æ–π –±–æ–Ω—É—Å: –¥–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –∫ body, –∫–æ–≥–¥–∞ –≤—Å–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ,
    // —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å "–ø—Ä—ã–∂–∫–∞" –∞–Ω–∏–º–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –µ—Å–ª–∏ JS —Å—Ä–∞–±–æ—Ç–∞–µ—Ç —Ä–∞–Ω—å—à–µ CSS
    document.body.classList.add('loaded');

});

// –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å—Ç–∏–ª—å –≤ CSS –¥–ª—è .loaded, –µ—Å–ª–∏ –Ω—É–∂–µ–Ω (—Å–µ–π—á–∞—Å –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –Ω–æ –ø–æ–ª–µ–∑–Ω–æ –∑–Ω–∞—Ç—å)
/*
body:not(.loaded) .container {
    opacity: 0;
}
*/
